@model Microsoft.AspNetCore.Identity.IdentityResult

@{
    ViewData["Title"] = "Credential Reset Report";
}

<style>
    .result-card {
        max-width: 600px;
        margin: 2rem auto;
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid #334155;
        border-radius: 20px;
        overflow: hidden;
    }
    .status-header {
        padding: 2rem;
        text-align: center;
        border-bottom: 1px solid #334155;
    }
    .status-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }
    .status-success { background: rgba(16, 185, 129, 0.1); color: #10b981; border: 1px solid #10b981; }
    .status-error { background: rgba(225, 29, 72, 0.1); color: #e11d48; border: 1px solid #e11d48; }
    
    .report-table {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85rem;
        color: #94a3b8;
    }
    .report-label { color: #64748b; text-transform: uppercase; letter-spacing: 1px; }
</style>

<div class="container py-5">
    <div class="result-card shadow-2xl animate__animated animate__fadeIn">
        
        @if (Model.Succeeded)
        {
            <div class="status-header">
                <div class="status-icon status-success">
                    <i class="fas fa-check-shield"></i>
                </div>
                <h3 class="text-white fw-bold">Credential Reset Successful</h3>
                <p class="text-muted small mb-0">The security principal's access key has been updated.</p>
            </div>
            
            <div class="p-4 p-md-5">
                <div class="alert bg-success bg-opacity-10 border-0 text-success small mb-4">
                    <i class="fas fa-info-circle me-2"></i>
                    @TempData["success"]
                </div>

                <div class="report-table">
                    <div class="d-flex justify-content-between mb-2">
                        <span class="report-label">Operation:</span>
                        <span class="text-white">PWD_FORCE_RESET</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="report-label">Status:</span>
                        <span class="text-success">EXECUTED</span>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span class="report-label">Timestamp:</span>
                        <span class="text-white">@DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss")</span>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="status-header">
                <div class="status-icon status-error">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="text-white fw-bold">Operation Failed</h3>
                <p class="text-muted small mb-0">The system encountered an error while updating credentials.</p>
            </div>

            <div class="p-4">
                <ul class="list-unstyled mb-0">
                    @foreach (var error in Model.Errors)
                    {
                        <li class="text-danger small mb-2">
                            <i class="fas fa-times-circle me-2"></i> @error.Description
                        </li>
                    }
                </ul>
            </div>
        }

        <div class="bg-dark bg-opacity-50 p-3 text-center border-top border-secondary">
            <a asp-action="Index" class="btn btn-warning btn-sm fw-bold px-4">
                RETURN TO ACCESS MATRIX
            </a>
        </div>
    </div>
</div>